$(document).ready(function(){"pickup"==localStorage.fulfillment_method?($("a#pickupRadio").addClass("active"),$("a#deliveryRadio").removeClass("active")):"delivery"==localStorage.fulfillment_method&&($("a#pickupRadio").removeClass("active"),$("a#deliveryRadio").addClass("active")),$(".modal-close").on("click",function(){$(".modal").removeClass("is-active")})});for(var total=0,i=0;i<50;i++){var price=$("#subtotal-"+i).text();(price=parseFloat(price.replace("$","")))&&(total+=price)}var cartItems=[];function showCartmenu(){var e=$("#cart"),t=$("#items-column");$(".item-column");e.hasClass("is-hidden-mobile")||e.hasClass("is-hidden-tablet")?(e.addClass("cart-mobile"),e.removeClass("is-hidden-mobile").fadeIn(),e.removeClass("is-hidden-tablet").fadeIn(),t.removeClass("is-full-mobile"),t.removeClass("is-full-tablet"),t.addClass("is-two-thirds-mobile"),t.addClass("is-two-thirds-tablet")):(e.addClass("is-hidden-mobile").fadeIn(),e.addClass("is-hidden-tablet").fadeIn(),e.addClass("is-hidden-mobile").fadeIn(),e.addClass("is-hidden-tablet").fadeIn(),t.addClass("is-full-mobile"),t.addClass("is-full-tablet"),t.removeClass("is-two-thirds-mobile"),t.removeClass("is-two-thirds-tablet"))}$(".modal-close").click(function(){$("[class*='is-active']").removeClass("is-active")});var prefs={},stores={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:["-85.3171557","35.0691112"]},properties:{phoneFormatted:"(423) 555-5555",phone:"4235555555",address:"601 Cherokee Blvd",postalCode:37405,state:"TN",city:"Chattanooga",closing:"20:00",desc:"Vibrant Meals Kitchen",storeId:1}},{type:"Feature",geometry:{type:"Point",coordinates:["-85.3106732","35.0641196"]},properties:{phoneFormatted:"(423) 555-5555",phone:"4235555555",address:"125 Cherokee Blvd",postalCode:37405,state:"TN",city:"Chattanooga",closing:"20:00",desc:"Chattanooga Functional Fitness",storeId:2}},{type:"Feature",geometry:{type:"Point",coordinates:["-85.31406600000003","35.0389277"]},properties:{phoneFormatted:"(423) 555-5555",phone:"4235555555",address:"525 West Main Street",postalCode:37402,state:"TN",city:"Chattanooga",closing:"20:00",desc:"Kyle House Fitness",storeId:3}},{type:"Feature",geometry:{type:"Point",coordinates:["-84.76723400000003","35.134262"]},properties:{phoneFormatted:"(423) 555-5555",phone:"4235555555",address:"5806 Waterlevel Highway",postalCode:37323,state:"TN",city:"Cleveland",closing:"20:00",desc:"Crossfit Anistemi",storeId:4}},{type:"Feature",geometry:{type:"Point",coordinates:["-84.8766215","35.157391"]},properties:{phoneFormatted:"(423) 555-5555",phone:"4235555555",address:"282 Church St SE",postalCode:37311,state:"TN",city:"Cleveland",closing:"20:00",desc:"Body By Hannah",storeId:5}}]};function getLocation(){navigator.geolocation?(navigator.geolocation.getCurrentPosition(showPosition),console.log("getting cords")):(console.log("error"),x.innerHTML="Geolocation is not supported by this browser.")}function showPosition(e){var t=[];t.push(e.coords.longitude),t.push(e.coords.latitude),console.log(t),$("#cords").val(t)}function addToCartFromModal(e){if(e.quantity=1,$(".modal").removeClass("is-active"),1!=localStorage.getItem("custEngageCompleted")){$("#modal-initial-click").addClass("is-active"),localStorage.setItem("custEngageCompleted",1);var t=JSON.parse(localStorage.cart);return t.push(e),localStorage.setItem("cart",JSON.stringify(t)),updateCartDiv(),!1}var a=JSON.parse(localStorage.cart);a.push(e);for(var o,i,s=(o="id",i={},a.map(function(e){var t=e[o];t in i?(i[t].quantity++,e.duplicate=!0):(i[t]=e,delete e.duplicate)}),a),l=[],d=0;d<s.length;d++)s[d].duplicate||l.push(s[d]);localStorage.setItem("cart",JSON.stringify(l)),updateCartDiv()}if($("#delivery").click(function(){localStorage.setItem("fulfillment_method","delivery"),$("#modal-initial-click").removeClass("is-active"),$("#modal-delivery").removeClass("is-active")}),getLocation(),$(".checkout-prompt-1").on("click",function(e){if(e.preventDefault(),e.stopPropagation(),$(".modal").removeClass("is-active"),1!=localStorage.getItem("custEngageCompleted")){$("#modal-initial-click").addClass("is-active"),localStorage.setItem("custEngageCompleted",1);var t=JSON.parse(localStorage.cart),a=$(this).data();return t.push(a),localStorage.setItem("cart",JSON.stringify(t)),updateCartDiv(),!1}a=$(this).data();var o=JSON.parse(localStorage.cart);o.push(a);for(var i,s,l=(i="id",s={},o.map(function(e){var t=e[i];t in s?(s[t].quantity++,e.duplicate=!0):(s[t]=e,delete e.duplicate)}),o),d=[],c=0;c<l.length;c++)l[c].duplicate||d.push(l[c]);localStorage.setItem("cart",JSON.stringify(d)),updateCartDiv()}),localStorage.cart){var cart=JSON.parse(localStorage.cart);updateCartDiv()}else localStorage.setItem("cart","[]"),updateCartDiv();if(localStorage.custEngageCompleted||localStorage.setItem("custEngageCompleted",0),localStorage.cartCount||localStorage.setItem("cartCount",0),!localStorage.fulfillmentMethod&&localStorage.pickupLocation){var store=JSON.parse(localStorage.pickupLocation);$("#pickupRadio").html('<div class="cart-icon"><img src="/images/pickup-icon.png" alt="img"/></div><div class="cart-icon-label"><div>'+store.desc+"</div></div>")}function nextAvalFulfill(){var e=moment().format("dddd"),t=moment().format("dddd");if("Monday"==e||"Tuesday"==e)var a=moment().add(0,"weeks").startOf("isoweek").add(2,"days").format("dddd MMMM DD YYYY");else a=moment().add(1,"weeks").startOf("isoweek").add(2,"days").format("dddd MMMM DD YYYY");if("Friday"==t||"Saturday"==e||"Sunday"==e||"Monday"==e)var o=moment().add(1,"weeks").startOf("isoweek").format("dddd MMMM DD YYYY");else o=moment().add(0,"weeks").startOf("isoweek").format("dddd MMMM DD YYYY");var i=$("#pickupDaysList"),s=moment(o).format("MMM DD"),l=moment(o).add(1,"week").format("MMM DD"),d=moment(a).format("MMM DD"),c=moment(a).add(1,"week").format("MMM DD");i.html(""),i.append('<div class="listing-item"><div class="list-item"><span-class="is-pulled-left">Monday<span><span class="store-hours is-pulled-right">'+s+"</span></div></div>"),i.append('<div class="listing-item"><div class="list-item">Wednesday<span class="store-hours is-pulled-right">'+d+"</span></div></div>"),i.append('<div class="listing-item"><div class="list-item">Monday<span class="store-hours is-pulled-right">'+l+"</span></div></div>"),i.append('<div class="listing-item"><div class="list-item">Wednesday<span class="store-hours is-pulled-right">'+c+"</span></div></div>"),$("#pickup-monday").attr("data-date",moment(o).format("MM-DD-YYYY")),$("#pickup-monday").html(moment(o).format("dddd MMMM DD")),$("#pickup-wednesday").attr("data-date",moment(a).format("MM-DD-YYYY")),$("#pickup-wednesday").html(moment(a).format("dddd MMMM DD"))}!function(){var e=document.querySelector(".burger");document.querySelector("#"+e.dataset.target);e.addEventListener("click",function(){var t=$(".cart-container");$(".burger").hasClass("is-active")?(t.css("display","none"),$(".flex-container").css("width","100%")):(t.css("display","flex"),t.css("width",""),$(".flex-container").css("width","50%")),e.classList.toggle("is-active")})}(),$(".card-content, .card-image").on("click",function(e){e.preventDefault(),e.stopPropagation(),$("#modal-item").addClass("is-active");var t=$(this).closest("li").data();$(".item-card-title").html('<img src="/'+t.img_url+'"/>'+t.name),$(".item-card-description").html('<section class="item-description">'+t.desc+"</section>"),$(".item-card-description").append("<a onclick='addToCartFromModal("+JSON.stringify(t)+")' data-quantity='1' class='is-pulled-right'><img src='/images/cart-icon.png' /></a>")}),$("#pickup, #pickupDay").on("mouseover",function(){$(this).css("background-color","#aad0ae"),$(".pickup-icon").attr("src","/images/pickup-icon-active.png"),$(this).find(".modal-footing").css("color","white")}),$("#pickup, #pickupDay").on("mouseout",function(){$(this).css("background-color","white"),$(".pickup-icon").attr("src","/images/pickup-icon-inactive.png"),$(this).find(".modal-footing").css("color","#363636")}),$("#delivery, #deliveryDay").on("mouseover",function(){$(this).css("background-color","#aad0ae"),$(".delivery-icon").attr("src","/images/delivery-icon-active.png"),$(this).find(".modal-footing").css("color","white")}),$("#delivery, #deliveryDay").on("mouseout",function(){$(this).css("background-color","white"),$(".delivery-icon").attr("src","/images/delivery-icon-inactive.png"),$(this).find(".modal-footing").css("color","#363636")}),$(document).on("click",".checkout-button",function(){if(localStorage.checkoutInitiated=1,nextAvalFulfill(),localStorage.myStore){var e=JSON.parse(localStorage.myStore);console.log(e),$(".store-desc").html(e.name)}localStorage.fulfillment_method||$("#modal-initial-click").addClass("is-active")}),$(document).on("click","#deliveryRadio",function(){$("a#pickupRadio").removeClass("active"),$("a#deliveryRadio").addClass("active"),localStorage.fulfillment_method="delivery",console.log("deliver")}),$(document).on("click","#pickupDay",function(){var e=$(this).find(".pickup-date").data();if(localStorage.pickup_day=e.date,$(".modal").removeClass("is-active"),$("#modal-checkout").addClass("is-active"),localStorage.myStore){var t=JSON.parse(localStorage.pickupLocation),a=localStorage.pickup_day;a=moment(a).format("dddd MMMM DD"),$("#checkout-fulfillment").html("Your order will be ready for pickup<br /><strong>"+a+"</strong><br />At<br /><strong>"+t.desc+"<br />"+t.address+"</strong>")}}),$(document).find(".categories > a").on("click",function(){$("#item-container > li.flex-item[data-category!='"+this.className+"']").toggle()}),$("#create-account").on("click",function(){$("#modal-checkout-account").addClass("is-active"),$("#modal-checkout").removeClass("is-active").slideDown()}),$(".checkout-form-row > a").on("click",function(){$(".checkout-form-row > a").removeClass("checked"),$(this).addClass("checked"),"stripe-checkout"==this.id?($(".paypal-checkout").addClass("hidden").fadeOut(),$(".stripe-checkout").removeClass("hidden").fadeIn()):$("div#zoid-paypal-button-7a03492904").click()})(function(){var e=$("#cart");window.innerWidth<1100?(e.css("display","none"),$(".flex-container").css("width","100%")):(e.css("display","flex"),$(".flex-container").css("width","70%"))})(),window.addEventListener("resize",function(){var e=$("#cart");window.innerWidth<1100?(e.css("display","none"),$(".flex-container").css("width","100%")):(e.css("display","flex"),$(".flex-container").css("width","70%"))}),$("#burger").on("click",function(){$("#cart").css("display","flex"),$(".flex-container").css("width","70%")});